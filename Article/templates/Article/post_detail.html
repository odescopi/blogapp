{% extends 'base.html' %}
{% load comments %}
{% load i18n %}
{% load static %}
{% load comments_xtd %}
{% block content %}
<!-- Blog Entries Column -->

<div class="col-md-8 mt-5" >
    <a href="{% url 'Article:blog-home' %}">back to home</a>

    <!-- Blog Post -->
    <div class="card mb-4 mt-4">

        <div class="card-body">
            <h3 class="card-title">{{ post.title }}</h3>
            {% if post.image %}
            <img src="{{post.image.url}}" alt="noimage" height="400" width="450"> {% endif %}
            <p class="card-text">{{ post.body|linebreaks }}</p>
            {% if post.author == request.user %}
            <p><a href="{% url 'Article:update-post' post.slug %}"><i class='far fa-edit' style='font-size:24px'></i></a></p>
            <p><a href="{% url 'Article:delete-post' post.slug %}"><i class="fas fa-trash-alt" style="font-size: 24px; color: #4d4d4d;" ></i></a></p>
            {% endif %}
            <div class="card-footer text-muted">
                Posted {{ post.publish }} by
                <span class="text-info mr-2">{{ post.author }}</span>
            </div>

            <div id="comments"></div>
        {% block extra-js %}
            <script crossorigin src="https://unpkg.com/react@16/umd/react.production.min.js"></script>
            <script crossorigin src="https://unpkg.com/react-dom@16/umd/react-dom.production.min.js"></script>
            <script>
             window.comments_props = {% get_commentbox_props for object %};
             window.comments_props_override = {
                 allow_comments: {%if object.approved_comments%}true{%else%}false{%endif%},
                 allow_feedback: true,
                 show_feedback: true,
                 allow_flagging: true,
                 polling_interval: 5000  // In milliseconds.
             };
            </script>
            <script
              src="https://code.jquery.com/jquery-3.3.1.min.js"
              crossorigin="anonymous"></script>
            <script
              src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.3/umd/popper.min.js"
              integrity="sha384-ZMP7rVo3mIykV+2+9J3UJ46jBk0WLaUAdn689aCwoqbBJiSnjAK/l8WvCWPIPm49"
              crossorigin="anonymous"></script>
            <script
              src="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/js/bootstrap.min.js"
              integrity="sha384-ChfqqxuZUCnJSK3+MXmPNIyE6ZbWh2IMqE241rYiqJxyMiZ6OW/JmZQ5stwEULTy"
              crossorigin="anonymous"></script>
            <script
              type="text/javascript"
              src="{% url 'javascript-catalog' %}"></script>
            <script src="{% static 'django_comments_xtd/js/vendor~plugin-2.9.1.js' %}"></script>
            <script src="{% static 'django_comments_xtd/js/plugin-2.9.1.js' %}"></script>
            <script>
            $(function() {
              $('[data-toggle="tooltip"]').tooltip({html: true});
            });
            </script>
            {% endblock %}

        </div>


    </div>
</div>

{% endblock content %}
{% block hidden %}{% render_only_users_can_post_template object %}{% endblock hidden %}

